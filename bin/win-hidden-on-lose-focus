#!/usr/bin/env bash
# Send HIDDEN to window one time when lose focus and kill itself.
# Muse use only with visible window, otherwise it will hide on focus

class=$1
set -e

xdotool search --onlyvisible --class "$class" \
    behave %1 blur \
    exec sh -c <<-EOF
        pkill xdotool
        && xdotool search --onlyvisible --class ${class} windowstate --add HIDDEN
        && pkill xdotool
EOF
